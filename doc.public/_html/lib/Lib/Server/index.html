<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Server (lib.Lib.Server)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">lib</a> &#x00BB; <a href="../index.html">Lib</a> &#x00BB; Server</nav><h1>Module <code>Lib.Server</code></h1></header><aside><p>Creates a server module with database query module M1 and database module M2 with names &quot;upick.db&quot;</p></aside><dl><dt class="spec exception" id="exception-Login_failure"><a href="#exception-Login_failure" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Login_failure</span> <span class="keyword">of</span> string</code></dt></dl><dl><dt class="spec value" id="val-login"><a href="#val-login" class="anchor"></a><code><span class="keyword">val</span> login : Yojson.Basic.t <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-make_response"><a href="#val-make_response" class="anchor"></a><code><span class="keyword">val</span> make_response : <span>int64 option</span> <span>&#45;&gt;</span> <span>Opium_kernel.Rock.Response.t Lwt.t</span></code></dt><dt class="spec value" id="val-load_json"><a href="#val-load_json" class="anchor"></a><code><span class="keyword">val</span> load_json : Opium.Std.Request.t <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span>(Yojson.Basic.t <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> Lwt.t</span></code></dt><dt class="spec value" id="val-load_json_login"><a href="#val-load_json_login" class="anchor"></a><code><span class="keyword">val</span> load_json_login : Opium.Std.Request.t <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span>(Yojson.Basic.t <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span>int64 option</span>)</span> <span>&#45;&gt;</span> <span>Opium_kernel.Rock.Response.t Lwt.t</span></code></dt><dd><p><code>load_json req ins_func inserter</code> inserts the contents of load_json into the database</p></dd></dl><dl><dt class="spec value" id="val-json_of_user"><a href="#val-json_of_user" class="anchor"></a><code><span class="keyword">val</span> json_of_user : <a href="../Dbquery/index.html#type-user">Dbquery.user</a> <span>&#45;&gt;</span> <span>[&gt; Ezjsonm.t ]</span></code></dt><dt class="spec value" id="val-json_of_group"><a href="#val-json_of_group" class="anchor"></a><code><span class="keyword">val</span> json_of_group : <a href="../Dbquery/index.html#type-group">Dbquery.group</a> <span>&#45;&gt;</span> <span>[&gt; Ezjsonm.t ]</span></code></dt><dt class="spec value" id="val-json_of_restriction_id"><a href="#val-json_of_restriction_id" class="anchor"></a><code><span class="keyword">val</span> json_of_restriction_id : string <span>&#45;&gt;</span> <span>[&gt; Ezjsonm.t ]</span></code></dt><dt class="spec value" id="val-is_member"><a href="#val-is_member" class="anchor"></a><code><span class="keyword">val</span> is_member : int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> bool</code></dt><dd><p>Checks to see if <code>u_id</code> is in <code>g_id</code></p></dd></dl><dl><dt class="spec value" id="val-is_friend"><a href="#val-is_friend" class="anchor"></a><code><span class="keyword">val</span> is_friend : int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> bool</code></dt><dd><p>Checks to see if two users are friends, with <code>f1</code> being the sender</p></dd></dl><dl><dt class="spec value" id="val-user_inserter"><a href="#val-user_inserter" class="anchor"></a><code><span class="keyword">val</span> user_inserter : Yojson.Basic.t <span>&#45;&gt;</span> <span>(string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>user_inserter json ins_func</code> inserts the data representing a user into the database</p></dd></dl><dl><dt class="spec value" id="val-friend_inserter"><a href="#val-friend_inserter" class="anchor"></a><code><span class="keyword">val</span> friend_inserter : Yojson.Basic.t <span>&#45;&gt;</span> <span>(int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-rest_inserter"><a href="#val-rest_inserter" class="anchor"></a><code><span class="keyword">val</span> rest_inserter : Yojson.Basic.t <span>&#45;&gt;</span> <span>(int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-rest_indx_inserter"><a href="#val-rest_indx_inserter" class="anchor"></a><code><span class="keyword">val</span> rest_indx_inserter : Yojson.Basic.t <span>&#45;&gt;</span> <span>(string <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-group_info_inserter"><a href="#val-group_info_inserter" class="anchor"></a><code><span class="keyword">val</span> group_info_inserter : Yojson.Basic.t <span>&#45;&gt;</span> <span>(string <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-group_inserter"><a href="#val-group_inserter" class="anchor"></a><code><span class="keyword">val</span> group_inserter : Yojson.Basic.t <span>&#45;&gt;</span> <span>(int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-group_host_user_inserter"><a href="#val-group_host_user_inserter" class="anchor"></a><code><span class="keyword">val</span> group_host_user_inserter : Yojson.Basic.t <span>&#45;&gt;</span> <span>(int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-survey_inserter"><a href="#val-survey_inserter" class="anchor"></a><code><span class="keyword">val</span> survey_inserter : Yojson.Basic.t <span>&#45;&gt;</span> <span>(int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> float <span>&#45;&gt;</span> float <span>&#45;&gt;</span> string <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span></code></dt><dt class="spec value" id="val-vote_status_inserter"><a href="#val-vote_status_inserter" class="anchor"></a><code><span class="keyword">val</span> vote_status_inserter : Yojson.Basic.t <span>&#45;&gt;</span> <span>(int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-vote_inserter"><a href="#val-vote_inserter" class="anchor"></a><code><span class="keyword">val</span> vote_inserter : Yojson.Basic.t <span>&#45;&gt;</span> <span>(int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span>int list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span></code></dt><dt class="spec value" id="val-default"><a href="#val-default" class="anchor"></a><code><span class="keyword">val</span> default : Opium.Std.App.builder</code></dt><dt class="spec value" id="val-get_list"><a href="#val-get_list" class="anchor"></a><code><span class="keyword">val</span> get_list : <span>Opium.Std.App.builder list</span></code></dt><dt class="spec value" id="val-post_list"><a href="#val-post_list" class="anchor"></a><code><span class="keyword">val</span> post_list : <span>Opium.Std.App.builder list</span></code></dt><dt class="spec value" id="val-app_builder"><a href="#val-app_builder" class="anchor"></a><code><span class="keyword">val</span> app_builder : <span><span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> list</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-port"><a href="#val-port" class="anchor"></a><code><span class="keyword">val</span> port : int</code></dt><dt class="spec value" id="val-start"><a href="#val-start" class="anchor"></a><code><span class="keyword">val</span> start : unit <span>&#45;&gt;</span> unit</code></dt></dl></div></body></html>